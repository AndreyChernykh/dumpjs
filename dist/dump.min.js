!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.dump=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){"use strict";function dump(root,options){function _dump(obj,identifier){identities.has(obj)||identities.set(obj,identifier);var data=_isArray$getId$isPrimitiveProperty$isPrimitive$isFunction$createObjectHandler$shellowClone$keys$isObjectRef.isArray(obj)?obj:Object.keys(obj);return data.reduce(destruct(obj),_isArray$getId$isPrimitiveProperty$isPrimitive$isFunction$createObjectHandler$shellowClone$keys$isObjectRef.isArray(obj)?[]:{})}function destruct(obj){return function(result,item,index){var prop=_isArray$getId$isPrimitiveProperty$isPrimitive$isFunction$createObjectHandler$shellowClone$keys$isObjectRef.isArray(result)?index:item;return obj=_isArray$getId$isPrimitiveProperty$isPrimitive$isFunction$createObjectHandler$shellowClone$keys$isObjectRef.shellowClone(obj),obj[prop]=serializer(prop,obj[prop]),_isArray$getId$isPrimitiveProperty$isPrimitive$isFunction$createObjectHandler$shellowClone$keys$isObjectRef.isFunction(obj[prop])?result:void 0===obj[prop]?result:(result[prop]=_isArray$getId$isPrimitiveProperty$isPrimitive$isFunction$createObjectHandler$shellowClone$keys$isObjectRef.isPrimitiveProperty(obj,prop)?obj[prop]:generateObjId(obj,prop),result)}}function generateObjId(obj,prop){var value=obj[prop],objId=void 0;return identities.has(value)?objId=identities.get(value):(objId=_isArray$getId$isPrimitiveProperty$isPrimitive$isFunction$createObjectHandler$shellowClone$keys$isObjectRef.getId(++id),identities.set(value,objId),unprocessed.push([value,objId])),objId}var serialized={},unprocessed=[],identities=new Map,id=0,key=_isArray$getId$isPrimitiveProperty$isPrimitive$isFunction$createObjectHandler$shellowClone$keys$isObjectRef.getId(id),serializer=_isArray$getId$isPrimitiveProperty$isPrimitive$isFunction$createObjectHandler$shellowClone$keys$isObjectRef.createObjectHandler(options&&options.serializer);if(null!=root){serialized[key]=_dump(root,key);var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=unprocessed[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _step$value=_slicedToArray(_step.value,2),obj=_step$value[0],identifier=_step$value[1];serialized[identifier]=_dump(obj,identifier)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator["return"]&&_iterator["return"]()}finally{if(_didIteratorError)throw _iteratorError}}return JSON.stringify(serialized)}}function restore(data,options){var visited=new Set,deserializer=_isArray$getId$isPrimitiveProperty$isPrimitive$isFunction$createObjectHandler$shellowClone$keys$isObjectRef.createObjectHandler(options&&options.deserializer),source=JSON.parse(data),keysList=_isArray$getId$isPrimitiveProperty$isPrimitive$isFunction$createObjectHandler$shellowClone$keys$isObjectRef.keys(source);if(0===keysList.length)return source;keysList.forEach(function(key){var obj=source[key];_isArray$getId$isPrimitiveProperty$isPrimitive$isFunction$createObjectHandler$shellowClone$keys$isObjectRef.keys(obj).filter(function(key){return _isArray$getId$isPrimitiveProperty$isPrimitive$isFunction$createObjectHandler$shellowClone$keys$isObjectRef.isObjectRef(obj[key])}).forEach(function(key){obj[key]=source[obj[key]]})}),_isArray$getId$isPrimitiveProperty$isPrimitive$isFunction$createObjectHandler$shellowClone$keys$isObjectRef.keys(source["@0"]).forEach(createPropHandler(source["@0"],visited,deserializer));var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=visited[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var item=_step2.value;null==item||_isArray$getId$isPrimitiveProperty$isPrimitive$isFunction$createObjectHandler$shellowClone$keys$isObjectRef.isPrimitive(item)||Object.isFrozen(item)||_isArray$getId$isPrimitiveProperty$isPrimitive$isFunction$createObjectHandler$shellowClone$keys$isObjectRef.keys(item).forEach(createPropHandler(item,visited,deserializer))}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2["return"]&&_iterator2["return"]()}finally{if(_didIteratorError2)throw _iteratorError2}}return source["@0"]}function createPropHandler(item,visited,deserializer){return function(prop){var propDescriptor=Object.getOwnPropertyDescriptor(item,prop);"set"in propDescriptor&&null==propDescriptor.set||propDescriptor.writable!==!1&&(item[prop]=deserializer(prop,item[prop]),visited.has(item[prop])||visited.add(item[prop]))}}var _slicedToArray=function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr)){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}throw new TypeError("Invalid attempt to destructure non-iterable instance")},_isArray$getId$isPrimitiveProperty$isPrimitive$isFunction$createObjectHandler$shellowClone$keys$isObjectRef=_dereq_("./utils");module.exports={dump:dump,restore:restore}},{"./utils":2}],2:[function(_dereq_,module,exports){"use strict";function isFunction(fn){return"function"==typeof fn}function shellowClone(obj){return isArray(obj)?obj.slice():merge({},obj)}function identity(key,value){return value}function isObjectRef(key){return regex.test(key)}function getId(n){return"@"+n}function isPrimitiveProperty(obj,prop){return null!=prop?isPrimitive(obj[prop]):function(prop){return isPrimitive(obj[prop])}}function isPrimitive(value){return"string"==typeof value||"number"==typeof value||"boolean"==typeof value||null===value}function createObjectHandler(callback){function objectHandler(key,value){return memo.has(value)||memo.set(value,callback(key,value)),memo.get(value)}var memo=new Map;return isFunction(callback)?objectHandler:identity}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFunction=isFunction,exports.shellowClone=shellowClone,exports.identity=identity,exports.isObjectRef=isObjectRef,exports.getId=getId,exports.isPrimitiveProperty=isPrimitiveProperty,exports.isPrimitive=isPrimitive,exports.createObjectHandler=createObjectHandler;var isArray=Array.isArray;exports.isArray=isArray;var merge=Object.assign;exports.merge=merge;var keys=Object.keys;exports.keys=keys;var regex=/^@\d{1,}$/i},{}]},{},[1])(1)});
//# sourceMappingURL=dump.min.js.map